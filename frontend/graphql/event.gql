fragment EventFields on EventEntity {
  id
  attributes {
    uuid
    name
    description
    enabled_modules
    email
    administrators
    date
    address
    latitude
    longitude
    position
    waitingPassengers {
      data {
        id
        attributes {
          name
          email
          location
          user {
            data {
              id
              attributes {
                firstName
                lastName
              }
            }
          }
        }
      }
    }
    travels(pagination: {limit: 500}) {
      data {
        id
        attributes {
          meeting
          meeting_latitude
          meeting_longitude 
          departure
          details
          vehicleName
          phone_number
          seats
          passengers {
            data {
              id
              attributes {
                name
                location
                user {
                  data {
                    id
                    attributes {
                      firstName
                      lastName
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

mutation createEvent(
  $name: String!
  $email: String!
  $date: Date
  $address: String
  $latitude: Float
  $longitude: Float
  $description: String
  $newsletter: Boolean
) {
  createEvent(
    data: {
      name: $name
      email: $email
      date: $date
      latitude: $latitude
      longitude: $longitude
      address: $address
      description: $description
      newsletter: $newsletter
    }
  ) {
    data {
      ...EventFields
    }
  }
}

mutation updateEvent($uuid: String!, $eventUpdate: EventInput!) {
  updateEventByUUID(uuid: $uuid, data: $eventUpdate) {
    data {
      ...EventFields
    }
  }
}

mutation addEventAdmin($eventId: ID!, $email: String!){
  addEventAdmin(eventId: $eventId, email: $email) {
    data {
      id
      attributes {
        administrators
      }
    }
  }
}

mutation deleteEventAdmin($eventId: ID!, $email: String!){
  deleteEventAdmin(eventId: $eventId, email: $email) {
    data {
      id
      attributes {
        administrators
      }
    }
  }
}

query eventByUUID($uuid: String!) {
  eventByUUID(uuid: $uuid) {
    data {
      ...EventFields
    }
  }
}
